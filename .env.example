# ============================================================================
# ATLAS CONCIERGE - ENVIRONMENT VARIABLES
# ============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control

# ----------------------------------------------------------------------------
# General Configuration
# ----------------------------------------------------------------------------
NODE_ENV=development
PORT=4000
APP_NAME=atlas-backend
APP_URL=http://localhost:4000
FRONTEND_URL=http://localhost:3000

# ----------------------------------------------------------------------------
# Database Configuration (PostgreSQL)
# ----------------------------------------------------------------------------
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=SCHEMA
DATABASE_URL=postgresql://atlas:atlas_password@localhost:5432/atlas_dev?schema=public

# Shadow database for Prisma migrations (dev only)
SHADOW_DATABASE_URL=postgresql://atlas:atlas_password@localhost:5432/atlas_shadow?schema=public

# Connection pool settings
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# ----------------------------------------------------------------------------
# Authentication & Security
# ----------------------------------------------------------------------------
# Generate with: openssl rand -base64 32
JWT_ACCESS_SECRET=your-super-secret-access-token-change-this
JWT_REFRESH_SECRET=your-super-secret-refresh-token-change-this

# Token TTL in seconds
JWT_ACCESS_TTL=900          # 15 minutes
JWT_REFRESH_TTL=2592000     # 30 days

# Bcrypt rounds for password hashing
BCRYPT_ROUNDS=12

# ----------------------------------------------------------------------------
# AWS Configuration
# ----------------------------------------------------------------------------
AWS_ACCOUNT_ID=123456789012
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key

# S3 Configuration
S3_BUCKET_NAME=atlas-concierge-uploads
S3_BUCKET_REGION=us-east-1

# ----------------------------------------------------------------------------
# CDK Configuration
# ----------------------------------------------------------------------------
CDK_DEFAULT_ACCOUNT=123456789012
CDK_DEFAULT_REGION=us-east-1

# ----------------------------------------------------------------------------
# Square Payments Configuration
# ----------------------------------------------------------------------------
# Get from: https://developer.squareup.com/apps
SQUARE_ACCESS_TOKEN=your-square-access-token
SQUARE_ENVIRONMENT=sandbox  # sandbox or production
SQUARE_APPLICATION_ID=your-square-app-id
SQUARE_LOCATION_ID=your-square-location-id

# Webhook signature verification
SQUARE_WEBHOOK_SIGNATURE_KEY=your-webhook-signature-key

# ----------------------------------------------------------------------------
# Google Maps API Configuration
# ----------------------------------------------------------------------------
# Get from: https://console.cloud.google.com/apis/credentials
GOOGLE_MAPS_API_KEY=your-google-maps-api-key

# API quotas and limits
GOOGLE_MAPS_RATE_LIMIT=50  # requests per second
GOOGLE_MAPS_CACHE_TTL=3600 # cache duration in seconds

# ----------------------------------------------------------------------------
# Redis Configuration
# ----------------------------------------------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_URL=redis://localhost:6379

# Redis connection pool
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=1000

# ----------------------------------------------------------------------------
# WebSocket Configuration
# ----------------------------------------------------------------------------
WS_PORT=4001
WS_PATH=/socket.io
WS_CORS_ORIGIN=http://localhost:3000

# ----------------------------------------------------------------------------
# Rate Limiting
# ----------------------------------------------------------------------------
RATE_LIMIT_TTL=60           # seconds
RATE_LIMIT_MAX=100          # max requests per TTL
RATE_LIMIT_SKIP_SUCCESSFUL=false

# ----------------------------------------------------------------------------
# Logging Configuration
# ----------------------------------------------------------------------------
LOG_LEVEL=debug             # error, warn, info, debug
LOG_FORMAT=json             # json or simple
LOG_DIRECTORY=./logs

# ----------------------------------------------------------------------------
# Monitoring & Observability
# ----------------------------------------------------------------------------
# Sentry for error tracking
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# CloudWatch metrics (for production)
CLOUDWATCH_NAMESPACE=ATLAS/Backend
CLOUDWATCH_ENABLED=false

# ----------------------------------------------------------------------------
# Feature Flags
# ----------------------------------------------------------------------------
FEATURE_FLAG_CLIENT_KEY=your-feature-flag-key
FEATURE_REAL_TIME_TRACKING=true
FEATURE_SQUARE_PAYMENTS=true
FEATURE_GOOGLE_MAPS=true

# ----------------------------------------------------------------------------
# Email Configuration (SendGrid)
# ----------------------------------------------------------------------------
SENDGRID_API_KEY=your-sendgrid-api-key
SENDGRID_FROM_EMAIL=noreply@atlasconcierge.com
SENDGRID_FROM_NAME=ATLAS Concierge

# ----------------------------------------------------------------------------
# SMS Configuration (Twilio)
# ----------------------------------------------------------------------------
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+1234567890

# ----------------------------------------------------------------------------
# CORS Configuration
# ----------------------------------------------------------------------------
CORS_ORIGINS=http://localhost:3000,http://localhost:19006
CORS_CREDENTIALS=true

# ----------------------------------------------------------------------------
# Session Configuration
# ----------------------------------------------------------------------------
SESSION_SECRET=your-session-secret-change-this
SESSION_MAX_AGE=86400000    # 24 hours in milliseconds

# ----------------------------------------------------------------------------
# Background Jobs (Optional - Bull/BullMQ)
# ----------------------------------------------------------------------------
QUEUE_REDIS_URL=redis://localhost:6379
QUEUE_PREFIX=atlas

# ----------------------------------------------------------------------------
# Maintenance & Operations
# ----------------------------------------------------------------------------
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=System under maintenance. Please try again later.

# ----------------------------------------------------------------------------
# Testing
# ----------------------------------------------------------------------------
TEST_DATABASE_URL=postgresql://atlas:atlas_password@localhost:5432/atlas_test?schema=public
TEST_REDIS_URL=redis://localhost:6379/1
